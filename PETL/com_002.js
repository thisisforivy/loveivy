(function(A){A.fn.keyable=function(O,I,F){var N=A(this);var S=null;var D=null;var J=null;var P=null;var C=null;var B=null;var G=null;var T=null;var L=true;C=P=A("li",N);if(typeof F!="undefined"){A(F).addClass("rw_selected")}switch(I){case"category_menu":U();break}switch(O){case"multi_column":if(I==="category_dropdown_menu"){D=A("td",N)}else{D=A("ul",N)}break}function Q(W){T=W;G=null;L=true;if(S!=null){B=S;S=null}else{B=A("li.rw_selected",N)}switch(I){case"category_menu":M();break;case"category_dropdown_menu":R();break}switch(O){case"multi_column":K();break;case"horizontal":E();break}var V=C.index(B);N.addClass("rw_key_nav");if(L){if(G==null){if(V===-1){if(T===40){G=0}else{if(T===38){G=C.length-1}}}else{if((V===0)&&T===38){G=C.length-1}else{if((V+1===C.length)&&T===40){G=0}else{if(T===40){G=V+1}else{if(T===38){G=V-1}}}}}}A("li.rw_selected",N).removeClass("rw_selected");C.eq(G).addClass("rw_selected")}}function K(){if(B.length!=0){for(var V=0;V<D.length;V++){if(A("li",D[V]).index(B)!==-1){J=D[V]}}}else{J=D[0]}C=A("li",J);if(T===37||T===39){var X=C.index(B);var W=D.index(J);if(T===37){if(W===0){J=D[D.length-1]}else{J=D[W-1]}}else{if(T===39){if(W===(D.length-1)){J=D[0]}else{J=D[W+1]}}}C=A("li",J);if(X===-1){G=0}else{if(X>=C.length){G=(C.length-1)}else{G=X}}}}function E(){if(T===39){T=40}else{if(T===37){T=38}else{L=false}}}function U(){if(originalTheme.inCategoryDropDown){var V=originalTheme.hideCategoryDropDown();A("#rw_category_menu #"+V).addClass("rw_selected")}else{if(A("li.rw_selected",N).length===0){A(C[0]).addClass("rw_selected")}}}function M(){if(T===40){if(A(".rw_dropdown_btn",B).length>0){originalTheme.quitCategoryKeyNavigation();A(".rw_dropdown_btn",B).trigger("click")}}}function R(){if(B.length===0&&(T===39||T===37)){var X=originalTheme.hideCategoryDropDown();var Z=A("#rw_category_menu #"+X);var W;var Y=A("#rw_category_menu li");var V=Y.index(Z);if(T===37&&V===0){W=Y[Y.length-1]}else{if(T===37){W=Y[V-1]}else{if(T===39&&V===(Y.length-1)){W=Y[0]}else{W=Y[V+1]}}}originalTheme.startCategoryKeyNavigation(W)}}var H=function(V){if(V.which==13){if(A("li.rw_selected",N).length===1){A("li.rw_selected a",N).trigger("click")}V.preventDefault();return false}else{if(V.which===37||V.which===38||V.which===39||V.which===40){Q(V.which);V.preventDefault();return false}}};this.quitKeyNavigation=function(){A("li.rw_selected",N).removeClass("rw_selected");N.removeClass("rw_key_nav");A(document).unbind("keydown",H)};A(document).keydown(H);A("li",N).mouseover(function(){S=A(this);N.removeClass("rw_key_nav");A("li.rw_selected",N).removeClass("rw_selected")});return this}})(jQuery);
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(){originalTheme.inAttachments=false;var B=false;jQuery(document).ready(function(){jQuery("#attachment_show").click(originalTheme.showAttachments);jQuery("#attachment_hide").click(originalTheme.hideAttachments)});function A(){if(!B){jQuery("#attachments_loader").show();jQuery.ajax({url:contextPath+"/ajaxactions/view-attachments.action",data:{pageId:jQuery("#abstractPageIdVar").html()},type:"POST",success:function(C){C=originalTheme.validateAjaxResponse(C);jQuery("#attachments_wrapper").html(C).show();jQuery("#attachments_loader").hide();B=true;startKeyNavigation(jQuery("#attachments_wrapper"))},error:function(C){if(C.status!=0){alert(C.status+" "+C.statusText);jQuery("#attachments_loader").hide();hideAttachments()}}})}else{jQuery("#attachments_wrapper").show();startKeyNavigation(jQuery("#attachments_wrapper"))}}originalTheme.showAttachments=function(){originalTheme.inAttachments=true;A();jQuery("#attachment_show").hide();jQuery("#attachment_hide").show();return false};originalTheme.hideAttachments=function(){originalTheme.inAttachments=false;jQuery("#attachments_wrapper").hide();jQuery("#attachment_show").show();jQuery("#attachment_hide").hide();quitKeyNavigation();return false}})();
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(){originalTheme.inFullscreen=false;var A=function(B){B.stopPropagation()};jQuery(document).ready(function(){jQuery("#rw_open_fullscreen").click(originalTheme.openFullscreen);jQuery("#rw_close_fullscreen, #rw_fullscreen_bg, #rw_fullscreen_wrapper").click(originalTheme.closeFullscreen)});originalTheme.openFullscreen=function(){if(jQuery("#rw_fullscreen_wrapper").length!=0){originalTheme.inFullscreen=true;jQuery("#rw_fullscreen_wrapper").addClass("rw_in_fullscreen");jQuery("#rw_fullscreen_bg").show();jQuery("#rw_open_fullscreen").hide();jQuery("#rw_close_fullscreen").show();jQuery("#rw_fullscreen_wrapper.rw_in_fullscreen #rw_fullscreen_container").bind("click",A);window.scroll(0,0)}};originalTheme.closeFullscreen=function(){originalTheme.inFullscreen=false;jQuery("#rw_fullscreen_wrapper.rw_in_fullscreen #rw_fullscreen_container").unbind("click",A);jQuery("#rw_fullscreen_wrapper").removeClass("rw_in_fullscreen");jQuery("#rw_fullscreen_bg").hide();jQuery("#rw_open_fullscreen").show();jQuery("#rw_close_fullscreen").hide()}})();
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(){originalTheme.inFavPageAndSpace=false;var A;jQuery(document).ready(function(){jQuery("#rw_main").append("<div id='rw_favorite_popup' class='rw_popup' style='display:none;'><div id='rw_favorite_popup_container' class='rw_popup_container'></div><div id='fav_page_space_loader' class='rw_popup_loader'><img src='"+contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/ajax-loader-gray.gif' /></div></div><div id='rw_popup_bg' style='display:none;'></div>")});originalTheme.showFavPageAndSpace=function(){jQuery("#rw_favorite_popup").show();jQuery("#rw_favorite_popup_container").hide();jQuery("#fav_page_space_loader").show();jQuery("#rw_popup_bg").show();window.scroll(0,0);originalTheme.inFavPageAndSpace=true;jQuery.ajax({url:contextPath+"/ajaxactions/fav-page-and-space.action",type:"POST",success:function(B){B=originalTheme.validateAjaxResponse(B);jQuery("#rw_favorite_popup_container").html(B).show();jQuery("#fav_page_space_loader").hide();jQuery(document).bind("click",originalTheme.hideFavPageAndSpace);jQuery("#rw_favorite_popup").click(function(C){C.stopPropagation()});startKeyNavigation(jQuery("#rw_favorite_popup_container"),"multi_column",null)}})};originalTheme.hideFavPageAndSpace=function(){jQuery("#rw_favorite_popup").hide();jQuery("#rw_favorite_popup_container").html("");jQuery("#rw_popup_bg").hide();originalTheme.inFavPageAndSpace=false;jQuery(document).unbind("click",originalTheme.hideFavPageAndSpace);quitKeyNavigation()}})();
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(){originalTheme.leftColumnHidden=false;jQuery(document).ready(function(){jQuery("#rw_hide_left_column").click(originalTheme.hideLeftColumn);jQuery("#rw_show_left_column, #rw_show_left_column_div").click(originalTheme.showLeftColumn);if(originalTheme.leftColumnState=="closed"){originalTheme.hideLeftColumn()}});function A(B){jQuery.ajax({url:contextPath+"/ajaxactions/left-column-state.action",type:"POST",data:{value:B},success:function(C){},error:function(C){}})}originalTheme.hideLeftColumn=function(){originalTheme.leftColumnHidden=true;jQuery("#rw_page_left").hide();jQuery("#rw_show_left_column_div").show();var B=jQuery("#rw_page_left_column").height();jQuery("#rw_show_left_column_div").height(B);jQuery("#rw_hide_left_column").hide();jQuery("#rw_show_left_column").show();jQuery("#rw_page_left_column").width("30px").css("padding","0px");jQuery("#rw_page_right_column").width("99%");A("closed")};originalTheme.showLeftColumn=function(){originalTheme.leftColumnHidden=false;jQuery("#rw_page_left").show();jQuery("#rw_show_left_column_div").hide();jQuery("#rw_hide_left_column").show();jQuery("#rw_show_left_column").hide();jQuery("#rw_page_left_column").width("23%").css("padding","0px 15px 0px 0px");jQuery("#rw_page_right_column").width("77%");A("open")}})();
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(){originalTheme.inTopMenu=false;var topMenuSectionTemplate;var topMenuItemTemplate;var hoverTopMenuItem;var topMenuContainer;var topMenuButton;var topMenuButtonActive;var topMenuInitiated=false;jQuery(document).ready(function(){jQuery("#rw_top_menu_button").click(toggleTopMenu);jQuery("#rw_top_menu_button_active").click(toggleTopMenu)});function toggleTopMenu(e){if(originalTheme.inTopMenu){originalTheme.hideTopMenu()}else{originalTheme.showTopMenu()}e.stopPropagation()}function initTopMenu(){if(!topMenuInitiated){topMenuInitiated=true;topMenuSectionTemplate=jQuery(jQuery("#originaltheme_rw_top_menu_section").html());topMenuItemTemplate=jQuery(jQuery("#originaltheme_top_menu_item").html());topMenuContainer=jQuery("#rw_top_menu_items_container");topMenuButton=jQuery("#rw_top_menu_button");topMenuButtonActive=jQuery("#rw_top_menu_button_active")}}function loadTopMenu(){originalTheme.scrollToElementWithOffset("#rw_top_menu",100);topMenuContainer.html("<div class='rw_popup_loader'><img src='"+contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/ajax-loader-gray.gif' /></div>");jQuery.ajax({url:contextPath+"/rest/originaltheme/1.0/topmenu",type:"GET",dataType:"json",cache:false,success:function(response){topMenuContainer.html("");var defaultSection=topMenuSectionTemplate.clone();jQuery.each(response.defaultItems,function(){defaultSection.append(getTopMenuItem(this))});topMenuContainer.append(defaultSection);if(response.customItems.length!=0){var customSection=topMenuSectionTemplate.clone();if(response.defaultItems.length!=0){customSection.addClass("rw_top_menu_section")}jQuery.each(response.customItems,function(){customSection.append(getTopMenuItem(this))});topMenuContainer.append(customSection)}startKeyNavigation(topMenuContainer,null,null)},error:function(xhr){if(xhr.status!=0){alert(xhr.status+" "+xhr.statusText);originalTheme.hideTopMenu()}}})}function getTopMenuItem(item){var itemContainer=topMenuItemTemplate.clone();var url;var linkTag=jQuery("a",itemContainer);jQuery("span.rw_top_menu_text",itemContainer).html(item.name);linkTag.attr("title",item.name);if(item.type==="custom"){if(item.icon!=null){jQuery("span.rw_top_menu_icon img",itemContainer).attr("src",contextPath+item.icon).show()}else{jQuery("span.rw_top_menu_icon",itemContainer).addClass("rw_no_icon_link")}url=item.url}else{jQuery("span.rw_top_menu_icon",itemContainer).addClass("rw_"+item.nameKey);url=contextPath+item.url}if(item.target==="_blank"){jQuery("span.rw_top_menu_text",itemContainer).addClass("rw_blank")}if(item.nameKey==="favourite_content"){linkTag.click(originalTheme.showFavPageAndSpace)}else{linkTag.click(function(){if(item.onClick!=null){try{eval(item.onClick)}catch(error){}}else{if(item.target==="_blank"){window.open(url)}else{window.location=url}}})}return itemContainer}originalTheme.hideTopMenu=function(){topMenuContainer.hide();originalTheme.inTopMenu=false;topMenuButtonActive.hide();topMenuButton.show();quitKeyNavigation();jQuery(document).unbind("click",originalTheme.hideTopMenu)};originalTheme.showTopMenu=function(){initTopMenu();if(topMenuContainer.length>0){topMenuButton.hide();topMenuButtonActive.show();topMenuContainer.show();originalTheme.inTopMenu=true;loadTopMenu();jQuery(document).bind("click",originalTheme.hideTopMenu)}}})();
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(){originalTheme.inSearchResult=false;var P=null;var E=false;var D=null;var Q=false;var M;var K;var R;var N;var A;jQuery(document).ready(function(){jQuery("#rw_search_query").val(originalTheme.searchTitle).focus(B)});function B(){if(!E){E=true;jQuery("#rw_search_query").val("");jQuery("#rw_search_form").keypress(function(S){if(S.which==13){return false}});jQuery("#rw_search_query").keyup(function(S){if(S.which==13){if(jQuery("li.rw_selected",R).length===0){jQuery("#rw_search_form").submit()}G();S.stopPropagation()}else{if(S.which==27||S.which==39||S.which==37){}else{H();if(jQuery(this).val().length>1){L(jQuery(this).val())}else{A()}}}})}}function L(S){if(D!=S){D=S;if(Q===false){J(D)}}}function J(S){Q=true;jQuery.ajax({url:contextPath+"/json/contentnamesearch.action",type:"GET",data:{query:S},dataType:"json",success:function(T){if(typeof T.errorMessage==="undefined"&&T.statusMessage==null){O();I();jQuery.each(T.contentNameMatches,function(U){if(U+1===T.contentNameMatches.length){C(this,true)}else{C(this,false)}});startKeyNavigation(R,null,null);if(D!=S){J(D)}else{Q=false}}else{if(T.statusMessage!=null){R.html("<div class='rw_warning_box' style='margin:0px 5px;'>"+T.statusMessage+"</div>");I();Q=false}else{R.html("<div class='rw_warning_box' style='margin:0px 5px;'>"+T.errorMessage+"</div>");I();Q=false}}},error:function(T){}})}function H(){if(typeof M==="undefined"){M=jQuery(jQuery("#rw_search_section").html())}if(typeof K==="undefined"){K=jQuery(jQuery("#rw_search_item").html())}if(typeof R==="undefined"){R=jQuery("#rw_search_result_container")}if(typeof N==="undefined"){N=jQuery("#rw_search_query")}}function O(){R.html("")}function I(){if(!originalTheme.inSearchResult){originalTheme.inSearchResult=true;R.show();jQuery(document).bind("click",A);R.click(function(S){S.stopPropagation()})}}function C(T,S){var U=M.clone();jQuery.each(T,function(V){U.append(F(this))});if(S){U.addClass("rw_last_section")}R.append(U)}function G(){R.html("<div id='rw_search_loader'><img src='"+contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/ajax-loader-gray.gif' /></div>")}function F(T){var S=K.clone();jQuery("span.rw_search_item_title",S).html(T.name);jQuery("span.rw_search_item_space",S).html(T.spaceName);jQuery("a",S).addClass(T.className).click(function(U){window.location=T.href;U.stopPropagation()});if(T.icon!=null){S.prepend("<img src='"+T.icon+"' height='16px' />")}return S}originalTheme.hideSearchResult=A=function(){originalTheme.inSearchResult=false;O();R.hide();quitKeyNavigation();jQuery(document).unbind("click",A)};originalTheme.showSearch=function(){if(jQuery("#rw_search_container_sticky_bar").length>0){originalTheme.showSearchStickyBar()}else{originalTheme.scrollToElementWithOffset("#rw_search",100);jQuery("#rw_search_query").focus()}}})();
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(){var D=false;var A=false;var H=false;var G=false;var C;var E=true;jQuery(document).ready(function(){C=jQuery("#rw_sticky_bar");if(jQuery("#rw_search_container_sticky_bar").length>0){A=true}if(jQuery("#rw_top_menu_container_sticky_bar").length>0){H=true}D=C.hasClass("show_on_scroll");if(D&&originalTheme.scrollSearchActive){C.hide();E=false;jQuery(window).scroll(function(){var K=jQuery(document).scrollTop();if(K>100&&!E){J()}else{if(K<100&&E){I();B()}}})}jQuery("#rw_sticky_bar_show").click(F);jQuery("#rw_sticky_bar_hide").click(B)});function J(){C.show();E=true}function I(){C.hide();E=false}function F(){F(false)}function F(K){originalTheme.inStickyBar=true;if(A){jQuery("#rw_search_container_sticky_bar").append(jQuery("#rw_search"))}if(H){jQuery("#rw_top_menu_container_sticky_bar").append(jQuery("#rw_top_menu"))}if(K==true){C.css({"margin-top":"0px"})}else{C.animate({marginTop:"0px"},300)}if(A){if(K==true){jQuery("#rw_search_query").focus()}else{setTimeout(function(){jQuery("#rw_search_query").focus()},300)}}jQuery("#rw_sticky_bar_show").hide();jQuery("#rw_sticky_bar_hide").show();jQuery("#rw_top").addClass("ie7_search_fix");jQuery("#rw_main_top_left").addClass("ie7_search_fix")}function B(){originalTheme.inStickyBar=false;if(A){jQuery("#rw_search_container").append(jQuery("#rw_search"));jQuery("#rw_search_query").blur()}if(H){jQuery("#rw_top_menu_container").append(jQuery("#rw_top_menu"))}C.animate({marginTop:"-62px"},300);jQuery("#rw_sticky_bar_show").show();jQuery("#rw_sticky_bar_hide").hide();jQuery("#top").removeClass("ie7_search_fix");jQuery("#rw_main_top_left").removeClass("ie7_search_fix")}originalTheme.showSearchStickyBar=function(){if(A){J();F(true)}};originalTheme.hideSearchStickyBar=function(){if(A){B();if(D&&jQuery(document).scrollTop()<100){I()}}}})();
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(A){A.fn.hoverCategory=function(D,F){var C;var B=function(G){C=G.parent().attr("id");var J=A("#rw_main").offset();var L=A("#rw_category_menu").offset();var K=G.offset();if(F=="single_column"){A("#rw_category_dropdown_wrapper").css("width",350);var I=A("#rw_main").width()+J.left;var H=K.left+330;if(H>I){A("#rw_category_dropdown_wrapper").css("left",A("#rw_main").width()-350)}else{A("#rw_category_dropdown_wrapper").css("left",K.left-20)}}else{A("#rw_category_dropdown_wrapper").css("left",J.left);A("#rw_category_dropdown_wrapper").css("width",A("#rw_main").width())}A("#rw_category_dropdown_wrapper").css("top",L.top+A("#rw_category_menu").height());originalTheme.inCategoryDropDown=true;A("#rw_category_menu a.rw_category_dropdown_visible").removeClass("rw_category_dropdown_visible");G.addClass("rw_category_dropdown_visible");A("#rw_category_dropdown_wrapper").show();if(C.indexOf("rw_category_")!=-1){A("#rw_category_dropdown_container").hide();A("#rw_category_dropdown_loader").show();A.ajax({type:"POST",url:D+"/ajaxactions/category-drop-down.action",data:{categoryKey:C.replace("rw_category_",""),width:A("#rw_category_dropdown_wrapper").width(),layout:F},success:function(M){M=originalTheme.validateAjaxResponse(M);A("#rw_category_dropdown_container").html(M);A("#rw_category_dropdown_container").show();A("#rw_category_dropdown_loader").hide();originalTheme.startKeyNavigation(A("#rw_category_dropdown_container"),F,"category_dropdown_menu")}})}};var E=originalTheme.hideCategoryDropDown=function(){A("#rw_category_menu a.rw_category_dropdown_visible").removeClass("rw_category_dropdown_visible");A("#rw_category_dropdown_wrapper").hide();A("#rw_category_dropdown_container").html("");originalTheme.inCategoryDropDown=false;A(document).unbind("click",E);originalTheme.quitKeyNavigation();return C};A(this).click(function(){var G=A(this).parent().parent();B(G);G.addClass("rw_category_dropdown_visible");A(document).bind("click",E);return false});A(document).ready(function(){A("#rw_category_dropdown_wrapper").click(function(G){G.stopPropagation()})})}})(jQuery);
if(typeof originalTheme==="undefined"){var originalTheme={}}(function(){jQuery(document).ready(function(){E();jQuery("#rw_toolbar .rw_toolbar_dropdown_button").click(function(){A(jQuery(this));return false});jQuery("#rw_toolbar .ajs-button a").click(function(){F()});var H=false;var I=false;jQuery(document).keydown(function(K){if(K.which==16){H=true}else{if(K.which==18){I=true}}}).keyup(function(K){if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){if(!jQuery(K.target).is("input, textarea, select")){if(K.which==16){H=false}else{if(K.which==18){I=false}}if(H&&K.which==70){if(originalTheme.inFavPageAndSpace){originalTheme.hideFavPageAndSpace()}else{originalTheme.showFavPageAndSpace()}}else{if((I&&K.which==53||K.which==56)||K.which==219){if(originalTheme.leftColumnHidden){originalTheme.showLeftColumn()}else{originalTheme.hideLeftColumn()}}else{if(K.which==70){if(originalTheme.inFullscreen){originalTheme.closeFullscreen()}else{originalTheme.openFullscreen()}}else{if(K.which==80){if(originalTheme.inTopMenu){originalTheme.hideTopMenu()}else{originalTheme.showTopMenu()}}else{if(K.which==65){if(originalTheme.inAttachments){originalTheme.hideAttachments()}else{window.scroll(0,0);originalTheme.showAttachments()}}else{if((H==true&&K.which==55)||K.which==191){originalTheme.showSearch()}else{if(K.which==78){if(D){originalTheme.quitCategoryKeyNavigation()}else{originalTheme.startCategoryKeyNavigation()}}}}}}}}}}if(K.which==27){if(originalTheme.inFavPageAndSpace==true){originalTheme.hideFavPageAndSpace()}if(originalTheme.inTopMenu==true){originalTheme.hideTopMenu()}else{if(originalTheme.inCategoryDropDown==true){originalTheme.hideCategoryDropDown()}else{if(originalTheme.inAttachments==true){originalTheme.hideAttachments()}else{if(originalTheme.inFullscreen==true){originalTheme.closeFullscreen()}else{if(originalTheme.inStickyBar==true){originalTheme.hideSearchStickyBar();if(originalTheme.inSearchResult==true){originalTheme.hideSearchResult()}}else{if(originalTheme.inSearchResult==true){originalTheme.hideSearchResult()}else{if(D){originalTheme.quitCategoryKeyNavigation()}}}}}}}}});var J=jQuery("#action-menu-link").next();J.css({margin:0,right:"auto",left:0});if(originalTheme.categoryDropDownEnabled){jQuery("#rw_category_menu span.rw_dropdown_btn").hoverCategory(contextPath,originalTheme.categoryDropDownLayout)}if(jQuery("#user-menu-link").outerWidth()>jQuery("#browse_and_user_menu div.user").outerWidth()){jQuery("#browse_and_user_menu div.user").css("width",jQuery("#user-menu-link").outerWidth()-2)}});var G=function(H){jQuery("#rw_toolbar li.dropdown_open").removeClass("dropdown_open");jQuery(this).addClass("dropdown_open")};function A(H){B();H.parent().addClass("dropdown_open");jQuery("#rw_toolbar .toolbar-dropdown-menu-item").bind("mouseenter",G);jQuery(document).bind("click",F)}var F=function(){jQuery("#rw_toolbar li.dropdown_open").removeClass("dropdown_open");jQuery("#rw_toolbar .toolbar-dropdown-menu-item").unbind("mouseenter",G);jQuery(document).unbind("click",F)};function B(){F();try{if(AJS.InlineDialog.current!=null){AJS.InlineDialog.current.hide()}}catch(H){}}function E(){jQuery("#rw_toolbar .toolbar-dropdown-menu-item").each(function(){dd=jQuery(".ajs-drop-down",this);if(!dd.length){return }dd=dd[0];dd.hide=function(){};dd.show=function(){}});var L=jQuery("#action-view-storage-link");if(L.length>0){var H=jQuery("#action-view-storage-link").clone();L.after(H);L.remove();H.click(function(P){window.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");P.preventDefault();return false})}jQuery("#page-favourite").unbind().click(function(R){R.stopPropagation();var Q=jQuery(this).find("span");if(Q.hasClass("waiting")){return AJS.stopEvent(R)}Q.addClass("waiting");var P=contextPath+"/ajaxactions/add-favourite-page.action";if(Q.hasClass("selected")){P=contextPath+"/ajaxactions/remove-favourite-page.action"}AJS.safeAjax({url:P,type:"POST",data:{pageId:AJS.params.pageId},success:function(S){Q.removeClass("waiting");Q.toggleClass("selected");Q.toggleClass("ie-page-favourite-selected")},error:function(S){alert("Server error while updating favourite")}});return AJS.stopEvent(R)});var K=function(P,Q,R){Q.addClass("waiting");AJS.safe.ajax({url:P,type:"POST",data:{pageId:AJS.params.pageId},success:function(S){if(jQuery("#page-unwatch").length==0){Q.removeClass("waiting");Q.toggleClass("selected");Q.toggleClass("ie-page-watching-selected")}else{Q.removeClass("waiting");Q.toggleClass("inactive");R.toggleClass("inactive");Q.parent().parent("li").toggleClass("hidden");R.parent().parent("li").toggleClass("hidden")}},error:function(S){alert("Server error while updating watching page")}})};var N=jQuery("#page-watch").unbind().find("span");if(jQuery("#page-unwatch").length==0){var J=contextPath+"/ajaxactions/start-watching-page.action";if(N.hasClass("selected")){J=contextPath+"/ajaxactions/stop-watching-page.action"}N.click(function(P){K(J,N,null);N.addClass("waiting");return AJS.stopEvent(P)})}else{var O=jQuery("#page-unwatch").unbind().find("span");var M=jQuery(N.parent().parent("li"));var I=jQuery(O.parent().parent("li"));if(N.hasClass("inactive")){M.addClass("hidden")}if(O.hasClass("inactive")){I.addClass("hidden")}O.click(function(P){K(contextPath+"/ajaxactions/stop-watching-page.action",O,N);O.addClass("waiting");return AJS.stopEvent(P)});N.click(function(P){K(contextPath+"/ajaxactions/start-watching-page.action",N,O);N.addClass("waiting");return AJS.stopEvent(P)})}}var D=false;originalTheme.startCategoryKeyNavigation=function(H){D=true;originalTheme.scrollToElementWithOffset("#rw_category_menu",100);startKeyNavigation(jQuery("#rw_category_menu"),"horizontal","category_menu",H);jQuery(document).bind("click",function(I){originalTheme.quitCategoryKeyNavigation();jQuery(document).unbind(I)})};originalTheme.quitCategoryKeyNavigation=function(){D=false;quitKeyNavigation()};originalTheme.showPopupLoader=function(){jQuery(".rw_popup_container").hide();jQuery(".rw_popup_loader").show()};originalTheme.addNewsOnDashboard=function(J,H,I){jQuery(J).hide().parent().find(".news_on_dashboard_loader").show();jQuery.ajax({url:contextPath+"/ajaxactions/add-news-dashboard.action?"+I,type:"POST",data:{pageId:H},success:function(K){K=originalTheme.validateAjaxResponse(K);jQuery(J).parent().find(".news_is_visible").show();jQuery(J).parent().find(".news_on_dashboard_loader").hide()}})};originalTheme.removeNewsOnDashboard=function(J,H,I){jQuery(J).hide().parent().find(".news_on_dashboard_loader").show();jQuery.ajax({url:contextPath+"/ajaxactions/remove-news-dashboard.action?"+I,type:"POST",data:{pageId:H},success:function(K){K=originalTheme.validateAjaxResponse(K);jQuery(J).parent().find(".news_is_not_visible").show();jQuery(J).parent().find(".news_on_dashboard_loader").hide()}})};var C;originalTheme.startKeyNavigation=startKeyNavigation=function(H,K,J,I){if(typeof C!="undefined"){quitKeyNavigation()}C=H.keyable(K,J,I)};originalTheme.quitKeyNavigation=quitKeyNavigation=function(){if(typeof C!="undefined"){C.quitKeyNavigation()}}})();
